<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>å¤©æ°”é¢„æŠ¥ - åŒ—äº¬ & ä¸¹ä½›</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #f2f2f2;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      padding: 30px;
    }

    .page {
      width: 100%;
      max-width: 1000px;
      display: flex;
      flex-wrap: wrap;
      justify-content: space-around;
      gap: 30px;
      margin-bottom: 40px;
      text-align: center;
    }

    .hidden {
      display: none !important;
    }

    .weather-card {
      background-color: #d0ecff;
      border-radius: 15px;
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);
      padding: 30px 20px;
      text-align: center;
      width: 45%;
      max-width: 500px;
      color: black;
      overflow: hidden;
      transition: transform 0.3s ease;
    }

    .city {
      font-size: 2em;
      margin-bottom: 8px;
      font-weight: bold;
    }

    .emoji {
      font-size: 3.5em;
      margin-bottom: 5px;
      animation: float 3s infinite ease-in-out;
      display: inline-block;
    }

    .emoji.sun {
      animation: sunRotate 6s linear infinite, float 3s infinite ease-in-out;
    }

    @keyframes sunRotate {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }

    @keyframes float {
      0% { transform: translateY(0px); }
      50% { transform: translateY(-5px); }
      100% { transform: translateY(0px); }
    }

    /* é£è½¦å›¾æ ‡å¸¦åŠ¨ç”» */
    .wind-wheel-icon {
      font-size: 2.5em;
      display: inline-block;
      animation: windRotate 4s linear infinite;
      vertical-align: middle;
    }

    @keyframes windRotate {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }

    .info {
      font-size: 1.3em;
      color: black;
      line-height: 1.2;
      white-space: pre-line;
      margin-top: 10px;
    }

    .season-tag {
      display: inline-block;
      margin-top: 10px;
      padding: 4px 10px;
      border-radius: 20px;
      font-size: 1em;
      font-weight: bold;
      color: white;
    }

    .spring { background-color: #34C759; } /* æ˜¥å­£ ğŸŸ¢ */
    .summer { background-color: #FF9F0A; } /* å¤å­£ ğŸŸ  */
    .autumn { background-color: #FFD60A; } /* ç§‹å­£ ğŸŸ¡ */
    .winter { background-color: #50C8FF; } /* å†¬å­£ ğŸ”µ */

    .moon {
      font-size: 2.5em;
      margin-top: 10px;
      display: block;
    }

    .nav-button {
      padding: 15px 30px;
      font-size: 1.2em;
      font-weight: bold;
      background: #007AFF;
      color: white;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      margin: 10px;
      transition: background 0.3s;
    }

    .nav-button:hover {
      background: #005ECF;
    }

    h1 {
      width: 100%;
      text-align: center;
      font-size: 1.8em;
      margin-bottom: 20px;
    }

    @media (max-width: 768px) {
      .weather-card {
        width: 90%;
      }
      .emoji {
        font-size: 3em;
      }
      .info {
        font-size: 1.15em;
      }
      .moon {
        font-size: 2.2em;
      }
      .wind-wheel-icon {
        font-size: 2em;
      }
    }
  </style>
</head>
<body>

  <!-- ç¬¬ä¸€é¡µï¼šä»Šå¤©å¤©æ°” -->
  <div id="todayPage" class="page">
    <h1>å¤©æ°”é¢„æŠ¥</h1>

    <!-- å·¦è¾¹ï¼šä¸¹ä½› -->
    <div class="weather-card">
      <div class="city">ğŸ“ ä¸¹ä½›</div>
      <div class="emoji sun">â˜€ï¸</div>
      <div class="info" id="denverToday"></div>
      <div class="moon" id="denverMoonToday">ğŸŒ•</div>
    </div>

    <!-- å³è¾¹ï¼šåŒ—äº¬ -->
    <div class="weather-card">
      <div class="city">ğŸ“ åŒ—äº¬</div>
      <div class="emoji rain">ğŸŒ§ï¸</div>
      <div class="info" id="beijingToday"></div>
      <div class="moon" id="beijingMoonToday">ğŸŒ•</div>
    </div>

    <!-- å¯¼èˆªæŒ‰é’® -->
    <button class="nav-button" onclick="showTomorrow()">æ˜å¤©å¤©æ°” â¡ï¸</button>
  </div>

  <!-- ç¬¬äºŒé¡µï¼šæ˜å¤©å¤©æ°” -->
  <div id="tomorrowPage" class="page hidden">
    <h1>æ˜å¤©å¤©æ°”é¢„æŠ¥</h1>

    <!-- å·¦è¾¹ï¼šä¸¹ä½› -->
    <div class="weather-card">
      <div class="city">ğŸ“ ä¸¹ä½›</div>
      <div class="emoji cloud">ğŸŒ¤ï¸</div>
      <div class="info" id="denverTomorrow"></div>
      <div class="moon" id="denverMoonTomorrow">ğŸŒ•</div>
    </div>

    <!-- å³è¾¹ï¼šåŒ—äº¬ -->
    <div class="weather-card">
      <div class="city">ğŸ“ åŒ—äº¬</div>
      <div class="emoji cloud">ğŸŒ¤ï¸</div>
      <div class="info" id="beijingTomorrow"></div>
      <div class="moon" id="beijingMoonTomorrow">ğŸŒ•</div>
    </div>

    <!-- è¿”å›æŒ‰é’® -->
    <button class="nav-button" onclick="showToday()">â¬…ï¸ è¿”å›å¤©æ°”é¢„æŠ¥</button>
  </div>

  <script>
    // è·å–æ ¼å¼åŒ–æ—¥æœŸ
    function getFormattedDate(dateObj, isToday = false) {
      const year = dateObj.getFullYear();
      const month = dateObj.getMonth() + 1;
      const date = dateObj.getDate();
      const daysOfWeek = ['æ˜ŸæœŸæ—¥','æ˜ŸæœŸä¸€','æ˜ŸæœŸäºŒ','æ˜ŸæœŸä¸‰','æ˜ŸæœŸå››','æ˜ŸæœŸäº”','æ˜ŸæœŸå…­'];
      const day = daysOfWeek[dateObj.getDay()];
      if (isToday) {
        return `ä»Šå¤©æ˜¯${month}æœˆ${date}æ—¥ ${day}`;
      }
      return `${year}å¹´${month}æœˆ${date}æ—¥ ${day}`;
    }

    // è·å–å½“å‰æ—¶é—´ï¼ˆå¸¦æ—¶åŒºåç§»ï¼‰
    function getFormattedTime(timeZoneOffset) {
      var now = new Date();
      var utcTime = now.getTime() + now.getTimezoneOffset() * 60000;
      var localTime = new Date(utcTime + timeZoneOffset * 3600000);

      var hours = ('0' + localTime.getHours()).slice(-2);
      var minutes = ('0' + localTime.getMinutes()).slice(-2);
      return `${hours}:${minutes}`;
    }

    // æ ¹æ®æœˆä»½è·å–å­£èŠ‚
    function getSeason(month) {
      const seasons = ["å†¬å­£", "æ˜¥å­£", "æ˜¥å­£", "æ˜¥å­£", "å¤å­£", "å¤å­£", "å¤å­£", "ç§‹å­£", "ç§‹å­£", "ç§‹å­£", "å†¬å­£", "å†¬å­£"];
      return seasons[month];
    }

    // è·å–å­£èŠ‚ç±»å
    function getSeasonClass(month) {
      const seasonClasses = ["winter", "spring", "spring", "spring", "summer", "summer", "summer", "autumn", "autumn", "autumn", "winter", "winter"];
      return seasonClasses[month];
    }

    // è·å–å­£èŠ‚å›¾æ ‡
    function getSeasonEmoji(season) {
      switch (season) {
        case "æ˜¥å­£": return "ğŸŒ¸";
        case "å¤å­£": return "ğŸ–ï¸";
        case "ç§‹å­£": return "ğŸ";
        case "å†¬å­£": return "â„ï¸";
        default: return "ğŸŒ¿";
      }
    }

    // ä¸»è¦ä¸­å›½ä¼ ç»ŸèŠ‚æ—¥æ•°æ®ï¼ˆç¤ºä¾‹ï¼‰
    const lunarData = {
      "2025-01-29": "æ­£æœˆåˆä¸€ Â· æ˜¥èŠ‚",
      "2025-02-12": "å…ƒå®µèŠ‚",
      "2025-04-04": "æ¸…æ˜èŠ‚",
      "2025-05-31": "ç«¯åˆèŠ‚",
      "2025-10-06": "ä¸­ç§‹èŠ‚",
      "2025-12-14": "è…Šå…«èŠ‚"
    };

    // ç²¾ç¡®å†œå†æ˜ å°„è¡¨ï¼ˆéƒ¨åˆ†å…³é”®æ—¥æœŸï¼‰
    const lunarCalendar = {
      "2025-05-31": "äº”æœˆåˆäº”",
      "2025-06-01": "äº”æœˆ åˆå…­",
      "2025-06-02": "äº”æœˆ å»¿äº”æ—¥",
      "2025-06-03": "äº”æœˆ å»¿å…­æ—¥",
      "2025-06-08": "å…­æœˆ åˆä¸€æ—¥",
      "2025-10-06": "ä¹æœˆ åˆä¸€",
      "2025-12-14": "å†¬æœˆ åäº”æ—¥"
    };

    // è·å–å†œå†æˆ–èŠ‚æ—¥ä¿¡æ¯
    function getLunarAndFestival(date) {
      const y = date.getFullYear();
      const m = ('0' + (date.getMonth() + 1)).slice(-2);
      const d = ('0' + date.getDate()).slice(-2);
      const key = `${y}-${m}-${d}`;

      if (lunarData[key]) {
        return { label: "ğŸ‰ èŠ‚æ—¥ï¼š", value: lunarData[key] };
      }

      const lunarKey = `${y}-${date.getMonth()+1}-${date.getDate()}`;
      const lunarStr = lunarCalendar[lunarKey] || `äº”æœˆ å»¿äº”æ—¥`;
      return { label: "ğŸ“… å†œå†ï¼š", value: `${y}å¹´${lunarStr}` };
    }

    // æ›´æ–°ä»Šæ—¥å¤©æ°”å¡ç‰‡
    function updateTodayCard(idPrefix, data) {
      const infoEl = document.getElementById(idPrefix + "Today");
      const moonEl = document.getElementById(idPrefix + "MoonToday");

      const today = new Date();
      const todayStr = getFormattedDate(today, true);
      const timeStr = getFormattedTime(data.timeZoneOffset);
      const month = today.getMonth(); // å½“å‰æœˆä»½
      const season = getSeason(month);
      const seasonEmoji = getSeasonEmoji(season);
      const seasonClass = getSeasonClass(month);

      const { label: lunarLabel, value: lunarInfo } = getLunarAndFestival(today);

      infoEl.innerHTML = `
        ğŸ“Œ å…¬å†ï¼š${todayStr}<br>
        ${lunarLabel}${lunarInfo}<br>
        ğŸ•’ æ—¶é—´ï¼š${timeStr}<br>
        â˜ï¸ å¤©æ°”ï¼š${data.todayCondition}<br>
        ğŸŒ¡ï¸ æ°”æ¸©ï¼š${data.todayTemp}<br>
        <span><span class="wind-wheel-icon">ğŸŒ€</span> é£åŠ›ï¼š${data.todayWind}</span><br>
        <span class="season-tag ${seasonClass}">${seasonEmoji} å­£èŠ‚ï¼š${season}</span>
      `;

      // è®¾ç½®æœˆç›¸
      moonEl.innerHTML = getMoonPhase(today);
    }

    // æ›´æ–°æ˜æ—¥å¤©æ°”å¡ç‰‡
    function updateTomorrowCard(idPrefix, data) {
      const infoEl = document.getElementById(idPrefix + "Tomorrow");
      const moonEl = document.getElementById(idPrefix + "MoonTomorrow");

      const tomorrow = new Date();
      tomorrow.setDate(tomorrow.getDate() + 1);
      const tomorrowStr = getFormattedDate(tomorrow);
      const timeStr = getFormattedTime(data.timeZoneOffset);
      const month = tomorrow.getMonth(); // æ˜å¤©çš„æœˆä»½
      const season = getSeason(month);
      const seasonEmoji = getSeasonEmoji(season);
      const seasonClass = getSeasonClass(month);

      const { label: lunarLabel, value: lunarInfo } = getLunarAndFestival(tomorrow);

      infoEl.innerHTML = `
        ğŸ“Œ å…¬å†ï¼š${tomorrowStr}<br>
        ${lunarLabel}${lunarInfo}<br>
        ğŸ•’ æ—¶é—´ï¼š${timeStr}<br>
        â˜ï¸ å¤©æ°”ï¼š${data.tomorrowCondition}<br>
        ğŸŒ¡ï¸ æ°”æ¸©ï¼š${data.tomorrowTemp}<br>
        <span><span class="wind-wheel-icon">ğŸŒ€</span> é£åŠ›ï¼š${data.tomorrowWind}</span><br>
        <span class="season-tag ${seasonClass}">${seasonEmoji} å­£èŠ‚ï¼š${season}</span>
      `;

      // è®¾ç½®æœˆç›¸
      moonEl.innerHTML = getMoonPhase(tomorrow);
    }

    // è·å–æœˆç›¸ ğŸŒ™
    function getMoonPhase(date) {
      const newMoonBase = new Date('2025-05-27'); // ä¸Šä¸€æ¬¡æ–°æœˆæ—¶é—´
      const lunarMonth = 29.5305882;

      let diffDays = Math.floor((date - newMoonBase) / (1000 * 60 * 60 * 24));
      let phaseIndex = ((diffDays % lunarMonth + lunarMonth) % lunarMonth) / lunarMonth;

      if (phaseIndex < 0.03 || phaseIndex > 0.97) return "ğŸŒ‘"; // æ–°æœˆ
      else if (phaseIndex < 0.47) return "ğŸŒ’"; // ä¸Šå¼¦æœˆ
      else if (phaseIndex < 0.53) return "ğŸŒ•"; // æ»¡æœˆ
      else if (phaseIndex < 0.97) return "ğŸŒ–"; // ä¸‹å¼¦æœˆ
      else return "ğŸŒ˜"; // æ®‹æœˆ
    }

    // é™æ€å¤©æ°”æ•°æ®ï¼ˆåŒ…å«ä»Šå¤©ã€æ˜å¤©ï¼‰
    const weatherData = {
      denver: {
        todayCondition: "æ™´æœ—",
        tomorrowCondition: "å¤šäº‘",
        todayTemp: "18Â°C",
        tomorrowTemp: "20Â°C",
        todayWeatherType: "Clear",
        tomorrowWeatherType: "Clouds",
        todayWind: "å¾®é£",
        tomorrowWind: "3çº§ è¥¿åŒ—é£",
        timeZoneOffset: -6,
      },
      beijing: {
        todayCondition: "å°é›¨",
        tomorrowCondition: "æ™´è½¬å¤šäº‘",
        todayTemp: "22Â°C",
        tomorrowTemp: "24Â°C",
        todayWeatherType: "Rain",
        tomorrowWeatherType: "Clouds",
        todayWind: "3çº§ ä¸œåŒ—é£",
        tomorrowWind: "2çº§ è¥¿å—é£",
        timeZoneOffset: +8,
      }
    };

    // é¡µé¢åŠ è½½åæ›´æ–°æ‰€æœ‰å¤©æ°”ä¿¡æ¯
    window.onload = function () {
      updateTodayCard('denver', weatherData.denver);
      updateTodayCard('beijing', weatherData.beijing);
      updateTomorrowCard('denver', weatherData.denver);
      updateTomorrowCard('beijing', weatherData.beijing);
    };

    // åˆ‡æ¢é¡µé¢
    function showToday() {
      document.getElementById('todayPage').classList.remove('hidden');
      document.getElementById('tomorrowPage').classList.add('hidden');
    }

    function showTomorrow() {
      document.getElementById('todayPage').classList.add('hidden');
      document.getElementById('tomorrowPage').classList.remove('hidden');
    }
  </script>
</body>
</html>